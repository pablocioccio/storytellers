<ng-template #rt let-r="result" let-t="term">
  <div class="d-flex align-items-center" style="height: 45px;">
    <img [src]="r['picture']" class="rounded-circle" width="40px;"
      onerror="this.onerror=null;this.src='assets/images/profile.svg';">
    <ngb-highlight [class]="'m-2'" [result]="r.name" [term]="t"></ngb-highlight>
    <ngb-highlight [class]="'d-none d-sm-block'" [result]="' (' + r.email + ') '" [term]="t"></ngb-highlight>
  </div>
</ng-template>

<div class="input-group">
  <input id="users-typeahead" type="text" class="form-control" [class.is-invalid]="searchFailed" [(ngModel)]="model"
    [ngbTypeahead]="search" [resultTemplate]="rt" [inputFormatter]="userInputFormatter"
    placeholder="Start typing to find players" (selectItem)="userSelected($event)" aria-label="Search for users">
  <div *ngIf="searching" class="spinner-border text-danger mx-2" role="status">
    <span class="sr-only">Searching...</span>
  </div>
  <div class="invalid-feedback" *ngIf="searchFailed">Sorry, users could not be loaded.</div>
</div>
